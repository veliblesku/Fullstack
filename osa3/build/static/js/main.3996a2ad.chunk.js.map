{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","put","concat","id","delete","Notification","_ref","message","react_default","a","createElement","className","PersonsForm","props","successMessage","setAlertMessage","setNewNumber","alertMessage","setSuccessMessage","newNumber","newName","persons","setPersons","setNewName","handleNameChange","handleNumberChange","useEffect","personService","initialPersons","onSubmit","event","preventDefault","personObject","name","number","personExists","find","p","map","person","includes","returnedPersons","setTimeout","catch","error","console","log","String","window","confirm","Object","objectSpread","replacedPerson","alert","value","onChange","type","ListPersons","filter","personsToShow","toLowerCase","_useState","useState","_useState2","slicedToArray","newDelete","setNewDelete","handleDeleteChange","target","deletePerson","rows","key","onClick","App","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","newFilter","setNewFilter","_useState11","_useState12","_useState13","_useState14","App_Notification","App_PersonsForm","App_ListPersons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.3996a2ad.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (newObject) => {\n  const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n  \n  return request.then(response => response.data)\n}\n\nconst del = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, del }","\nimport React, { useState, useEffect } from 'react'\n\n\n\nimport personService from './services/persons'\n\n\n\n\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst PersonsForm = (props) => {\n\n  const {successMessage,setAlertMessage,alertMessage, setNewNumber ,setSuccessMessage, newNumber, newName, persons, setPersons,setNewName, handleNameChange, handleNumberChange} = props\n\n\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const personExists = persons.find(p=> p.name === newName)\n\n    if (persons.map(person => person.name).includes(personObject.name) === false) {\n      personService\n      .create(personObject)\n      .then(returnedPersons => {\n        setPersons(persons.concat(returnedPersons))\n        setNewName('')\n        setNewNumber('')\n        setSuccessMessage(\n          `muistiinpano lisätty onnistuneesti`\n        )\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setAlertMessage(\n           String(error.response.data.error)\n           \n        )\n        \n      })\n\n     \n    }\n    else {\n      \n      const ok = window.confirm(`${personObject.name} on jo käytössä. Päivitetäänkö numero?`);\n\n      if (ok) {\n        personService\n        .update({\n          ...personExists,\n          number: newNumber\n        })\n        .then(replacedPerson => {\n          setPersons(persons.map(p => p.name === newName ? replacedPerson : p))\n          setNewName('')\n          setNewNumber('')\n          alert(\"nimi muutettu\")\n        })\n      }\n    }\n      \n  }\n\n  return (\n    <form onSubmit={addPerson}>\n    <div>\n      nimi: <input value={newName}\n      onChange={handleNameChange} />\n    </div>\n    <div>\n      numero: <input value={newNumber}\n      onChange={handleNumberChange} /></div>\n    <div>\n      <button type=\"submit\">lisää</button>     \n    </div>      \n  </form>\n  )\n\n}\n\n\nconst ListPersons = (props) => {\n  const { persons, setPersons, filter} = props\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter))\n\n  const [newDelete, setNewDelete] = useState('')\n\n  const handleDeleteChange = (event) => {\n    console.log(event.target.value)\n    setNewDelete(event.target.value)\n    \n  }\n  \n\n  const deletePerson = (event) => {\n    \n\n      personService\n        .del(newDelete)\n        .then(initialPersons => {\n          setPersons(initialPersons)\n        })\n \n    \n  \n  }\n\n  const rows = personsToShow.map(person => \n  <tr key = {person.name} id = {person.id}>\n    <td>{person.name}</td> \n    <td>{person.number}</td>\n    <td>{person.id}</td>\n    <td>\n    <form onSubmit={deletePerson}>\n    <button type= \"submit\" value = {person.id} onClick = {handleDeleteChange}>poista</button>\n    </form>\n    \n    </td>\n  </tr>\n \n  )\n  \n  \n\n\n  \n  return(\n\n    \n    <div>\n        <table>\n          <tbody>\n           {rows}\n          </tbody>\n        </table>\n    </div>\n  )\n}\n\n\nconst App = () => {\n\n  \n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [successMessage, setSuccessMessage] = useState('')\n  const [alertMessage, setAlertMessage] = useState('')\n\n\n\n\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n    \n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n    \n  }\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n    \n  }\n\n\n\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <div className = \"success\">\n        <Notification message={successMessage} />\n      </div>\n      \n      <div className = \"alert\">\n        <Notification message={alertMessage} />\n      </div>\n    \n      <form>\n        <div>\n          rajaa näytettäviä: <input value = {newFilter}\n          onChange={handleFilterChange}\n         />\n        </div>\n      </form>\n\n      <h3>Lisää henkilö</h3>\n      <PersonsForm persons={persons}\n        newNumber={newNumber} \n        newName = {newName}\n        setPersons={setPersons}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        alertMessage={alertMessage}\n        setAlertMessage={setAlertMessage}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        successMessage={successMessage}\n        setSuccessMessage={setSuccessMessage}/>\n      <h2>Numerot</h2>\n      <div>\n        <ListPersons persons={persons} filter={newFilter} setPersons={setPersons}\n        />\n      </div>\n     \n      \n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n\n"],"sourceRoot":""}